===============
  TODO
===============
. Trader (determines the concrete strategy)
  - Listen to Signals from the brain
  - Determine if we are using the funding info
  . Listen to market updates

  . Check how many open positions we have / based on how much margin is allocated
  . Determines the amount of margin and leverage to use
  . Calculates possible fees

  . Sends the Buy / Sell message
    . if open & there is enough margin left, emit Buy(X amount)
    . if close & there is a position, emit Sell(X amount)

  . 'Magic' SL. After an open position, if the price breaks out again, try to close at a good price

  . If there is an existing position when the trader starts, close it first

. Broker (Execute the strategy)
  . Watch order book
  . Determine size and number of orders to create
  . Send orders to the market
  . Overviews the market and determines when to cancel orders
  . Receives orders from the trader
  . Amend orders!!!

. Auditor (Tracks the bot performance)
  . Listens to 2 events
  . On candle closed
  . On trade accepted (short or long opened | closed) ((TradeExecuted?))
  . Logs the time elapsed

===============
  Backlog
===============
. Maker Icebergs. Similar to icebergs
  . Only a small order is put on the market
  . When it's filled, other maker orders are created

. Consider funding before openning positions

===============
  DONE
===============
. fetch available margin
. fetch positions
. handle deposit (update to wallet)
. track subscribe requests, and match with pendings?
. calculate usable funds
. get usable margin
. test the 'partial' load with a fresh account
. Design strategy
. Test strategy on TV

. Analyst (technical analysis)
  - Watch market
  - Cache N candles on the analyst side
  - Calculate needed indicators

. log every message that passes through the backbone to replicate the data flow platita

. Chandler (Bundle trades into ohlcvt candles)
  . Listen to live trades
  . Bundle trades into OHLCVT candles
  . Emit the CandleClosed
  . Try to enter market 10~15s before the candle closes

. Brain (finds alpha opportunities)
  . Listens to updates from the analyst
  . Implements a concrete strategy to find alpha
  . Emit buy/sell signal

===============
  IGNORE
===============
. Manually accumulate candles with an offset. Instead of [0, 5, 10, 15], [1, 6, 11, 16] etc..
. Shared memory, instead of sending the full list of candles?
